{% extends 'base.html' %}

{% block title %}{{ problem.title }} - Problem Details{% endblock %}

{% block content %}
<div class="container mx-auto px-2 sm:px-4 py-4 sm:py-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-md p-3 sm:p-6 mb-4 sm:mb-6">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4">
                <div>
                    <h1 class="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-800 mb-2">{{ problem.title }}</h1>
                    <div class="flex flex-wrap items-center gap-2">
                        <span class="bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs sm:text-sm font-medium">
                            {{ problem.category.name }}
                        </span>
                        {% if problem.difficulty == 'Easy' %}
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs sm:text-sm font-medium">Easy</span>
                        {% elif problem.difficulty == 'Medium' %}
                            <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs sm:text-sm font-medium">Medium</span>
                        {% else %}
                            <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs sm:text-sm font-medium">Hard</span>
                        {% endif %}
                        {% if problem.contest_only %}
                            <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs sm:text-sm font-medium">Contest Only</span>
                        {% endif %}
                    </div>
                </div>
                <div class="flex gap-2">
                    {% if request.user.is_staff %}
                        <a href="{% url 'problems:edit_problem' problem.slug %}" class="bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700 text-sm">
                            <i class="fas fa-edit mr-1"></i> Edit
                        </a>
                    {% endif %}
                    {% if not problem.contest_only %}
                        <a href="{% url 'problems:problem_solve' problem.slug %}" class="bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700 text-sm">
                            <i class="fas fa-code mr-1"></i> Solve
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Problem Description -->
        <div class="bg-white rounded-lg shadow-md p-3 sm:p-6 mb-4 sm:mb-6">
            <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-3 sm:mb-4">Problem Description</h2>
            <div class="prose prose-sm sm:prose max-w-none text-gray-700">
                {{ problem.description|linebreaks }}
            </div>
        </div>

        <!-- Input/Output Format -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6">
            {% if problem.input_format %}
            <div class="bg-white rounded-lg shadow-md p-3 sm:p-6">
                <h3 class="text-base sm:text-lg font-semibold text-gray-800 mb-2 sm:mb-3">Input Format</h3>
                <div class="text-sm sm:text-base text-gray-700">
                    {{ problem.input_format|linebreaks }}
                </div>
            </div>
            {% endif %}

            {% if problem.output_format %}
            <div class="bg-white rounded-lg shadow-md p-3 sm:p-6">
                <h3 class="text-base sm:text-lg font-semibold text-gray-800 mb-2 sm:mb-3">Output Format</h3>
                <div class="text-sm sm:text-base text-gray-700">
                    {{ problem.output_format|linebreaks }}
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Sample Input/Output -->
        {% if problem.sample_input and problem.sample_output %}
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6">
            <div class="bg-white rounded-lg shadow-md p-3 sm:p-6">
                <h3 class="text-base sm:text-lg font-semibold text-gray-800 mb-2 sm:mb-3">Sample Input</h3>
                <pre class="bg-gray-100 p-3 rounded text-xs sm:text-sm overflow-x-auto"><code>{{ problem.sample_input }}</code></pre>
            </div>
            <div class="bg-white rounded-lg shadow-md p-3 sm:p-6">
                <h3 class="text-base sm:text-lg font-semibold text-gray-800 mb-2 sm:mb-3">Sample Output</h3>
                <pre class="bg-gray-100 p-3 rounded text-xs sm:text-sm overflow-x-auto"><code>{{ problem.sample_output }}</code></pre>
            </div>
        </div>
        {% endif %}

        <!-- Constraints -->
        {% if problem.constraints %}
        <div class="bg-white rounded-lg shadow-md p-3 sm:p-6 mb-4 sm:mb-6">
            <h3 class="text-base sm:text-lg font-semibold text-gray-800 mb-2 sm:mb-3">Constraints</h3>
            <div class="text-sm sm:text-base text-gray-700">
                {{ problem.constraints|linebreaks }}
            </div>
        </div>
        {% endif %}

        <!-- Contest Only Notice -->
        {% if problem.contest_only %}
        <div class="bg-purple-50 border border-purple-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6">
            <div class="flex items-center gap-2 text-purple-800">
                <i class="fas fa-trophy"></i>
                <span class="font-semibold text-sm sm:text-base">Contest Problem</span>
            </div>
            <p class="text-purple-700 text-xs sm:text-sm mt-1">
                This problem is only available during contests. Join an active contest to solve this problem.
            </p>
        </div>
        {% endif %}

        <!-- Back Button -->
        <div class="text-center">
            <a href="{% url 'problems:admin_problems' %}" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 text-sm">
                <i class="fas fa-arrow-left mr-1"></i> Back to Problems
            </a>
        </div>
    </div>
</div>
{% endblock %}